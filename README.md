# [flavorjones/docker-truffleruby](https://github.com/flavorjones/docker-truffleruby)

This project contains configuration for an unofficial TruffleRuby Docker/OCI image.

Those images are published at https://hub.docker.com/repository/docker/flavorjones/truffleruby/general

The Dockerfiles are published at https://github.com/flavorjones/docker-truffleruby


## Base Images and Tags

There are two basic flavors right now:

- Debian Buster ([`buildpack-deps:buster`](https://hub.docker.com/_/buildpack-deps)) (~1.2GB)
- Debian Buster "Slim" ([`debian:buster-slim`](https://hub.docker.com/_/debian)) (~600MB)

Tags:

- `latest`, `stable`, `20.2.0`, `20.2.0-buster`, `buster` - TruffleRuby 20.2.0 based on Buster
- `20.2.0-buster-slim`, `buster-slim` - TruffleRuby 20.2.0 based on Buster "Slim"
- `nightly`, `nightly-buster` - Latest Nightly based on Buster
- `nightly-buster-slim` - Latest Nightly based on Buster "Slim"


### Y U NO Alpine?

As of 2020-10-01, the standalone TruffleRuby image isn't compatible with `musl` (meaning it isn't compatible with Alpine). You can read more about that in https://github.com/oracle/truffleruby/issues/1449.


### Other Base Images

The Dockerfiles are generated by [`update-dockerfiles`](update-dockerfiles) which is easily extensible to other base images in the future.


## Nightlies

This project also contains a Concourse pipeline to kick off an Docker Hub automated build every 24 hours so that up-to-date images of the TruffleRuby nightly version are created. See [`ci/pipeline.yml`](ci/pipeline.yml).


## Compatibility

I've done my best to make this image behave like the official CRuby and JRuby container images, especially when it comes to `gem install` and `bundle install` behavior. For reference and comparison:

- CRuby: [docker hub](https://hub.docker.com/_/ruby), [dockerfiles](https://github.com/docker-library/ruby/)
- JRuby: [docker hub](https://hub.docker.com/_/jruby), [dockerfiles](https://github.com/cpuguy83/docker-jruby/)


## License

MIT. See [LICENSE](LICENSE).
